tool_name: veria_kyc_validate
description: Validate basic KYC data with a provider (masked; system injects tenant/region).
handler_name: http_post

input_schema:
  type: object
  properties:
    name: { type: string }
    dob: { type: string, description: "YYYY-MM-DD" }
    address: { type: string }
    id_number: { type: string }
  required: ["name","dob","address","id_number"]

handler_input_template: |
  {
    "url": "https://kyc.example.com/api/validate",
    "headers": {
      "Authorization": "Bearer {{ env.KYC_API_TOKEN | default('demo') }}",
      "X-Tenant": "{{ env.TENANT_ID | default('local') }}",
      "X-Region": "{{ env.REGION | default('us-west-2') }}"
    },
    "json": {
      "name": "{{ input.name }}",
      "dob": "{{ input.dob }}",
      "address": "{{ input.address }}",
      "id_number": "{{ input.id_number }}"
    }
  }

output_template: |
  {
    "data": {
      "status": "{{ (result.status if result is mapping and 'status' in result else 'unknown') }}"
    }
  }

meta:
  roles: ["compliance","onboarding"]
